"use strict";(self.webpackChunkdocs_rancherdesktop_io=self.webpackChunkdocs_rancherdesktop_io||[]).push([[47895],{48171:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return o},default:function(){return h},frontMatter:function(){return i},metadata:function(){return a},toc:function(){return d}});var s=t(85893),r=t(11151);const i={title:"Using Persistent Storage"},o=void 0,a={id:"tutorials/using-persistent-storage",title:"Using Persistent Storage",description:"Containers are, by design, ephemeral and stateless. However, most real-world use cases require containers to produce or consume data that often needs to be persisted. To address this challenge, container engines offer mechanisms such as Bind mounts and Volumes. Both the docker and nerdctl CLIs provide options -v and --mount to start a container with a bind mount or a volume.",source:"@site/versioned_docs/version-1.13/tutorials/using-persistent-storage.md",sourceDirName:"tutorials",slug:"/tutorials/using-persistent-storage",permalink:"/1.13/tutorials/using-persistent-storage",draft:!1,unlisted:!1,editUrl:"https://github.com/rancher-sandbox/docs.rancherdesktop.io/edit/main/versioned_docs/version-1.13/tutorials/using-persistent-storage.md",tags:[],version:"1.13",frontMatter:{title:"Using Persistent Storage"},sidebar:"tutorialSidebar",previous:{title:"Working with WebAssembly",permalink:"/1.13/tutorials/working-with-webassembly"},next:{title:"Generating Deployment Profiles",permalink:"/1.13/how-to-guides/generating-deployment-profiles"}},c={},d=[{value:"Bind mount",id:"bind-mount",level:2},{value:"Using <code>-v</code>",id:"using--v",level:3},{value:"macOS &amp; Linux",id:"macos--linux",level:4},{value:"Windows",id:"windows",level:4},{value:"Using <code>--mount</code>",id:"using---mount",level:3},{value:"macOS &amp; Linux",id:"macos--linux-1",level:4},{value:"Windows",id:"windows-1",level:4},{value:"Volume",id:"volume",level:2},{value:"Using <code>-v</code>",id:"using--v-1",level:3},{value:"Using <code>--mount</code>",id:"using---mount-1",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components},{Head:t,TabItem:i,Tabs:o}=n;return t||u("Head",!0),i||u("TabItem",!0),o||u("Tabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t,{children:(0,s.jsx)("link",{rel:"canonical",href:"https://docs.rancherdesktop.io/tutorials/working-with-storage"})}),"\n",(0,s.jsxs)(n.p,{children:["Containers are, by design, ephemeral and stateless. However, most real-world use cases require containers to produce or consume data that often needs to be persisted. To address this challenge, container engines offer mechanisms such as ",(0,s.jsx)(n.strong,{children:"Bind mounts"})," and ",(0,s.jsx)(n.strong,{children:"Volumes"}),". Both the docker and nerdctl CLIs provide options ",(0,s.jsx)(n.code,{children:"-v"})," and ",(0,s.jsx)(n.code,{children:"--mount"})," to start a container with a bind mount or a volume."]}),"\n",(0,s.jsx)(n.h2,{id:"bind-mount",children:"Bind mount"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Bind mount"})," mounts a file or directory on the host machine into a container. For example, to mount the current directory of the host machine to ",(0,s.jsx)(n.code,{children:"/app/src"})," directory of a container, you can use ",(0,s.jsx)(n.code,{children:"-v"})," or the slightly verbose ",(0,s.jsx)(n.code,{children:"--mount"})," as shown below."]}),"\n",(0,s.jsxs)(n.h3,{id:"using--v",children:["Using ",(0,s.jsx)(n.code,{children:"-v"})]}),"\n",(0,s.jsx)(n.h4,{id:"macos--linux",children:"macOS & Linux"}),"\n",(0,s.jsxs)(o,{groupId:"container-runtime",children:[(0,s.jsx)(i,{value:"nerdctl",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"nerdctl container run --rm -it -v $(pwd)/src:/app/src alpine:latest /bin/sh\n"})})}),(0,s.jsx)(i,{value:"docker",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"docker container run --rm -it -v $(pwd)/src:/app/src alpine:latest /bin/sh\n"})})})]}),"\n",(0,s.jsx)(n.h4,{id:"windows",children:"Windows"}),"\n",(0,s.jsxs)(o,{groupId:"container-runtime",children:[(0,s.jsx)(i,{value:"nerdctl",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"// Cmd\nnerdctl container run --rm -it -v %cd%/src:/app/src alpine:latest /bin/sh\n\n// Powershell\nnerdctl container run --rm -it -v ${pwd}/src:/app/src alpine:latest /bin/sh\n"})})}),(0,s.jsx)(i,{value:"docker",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"// Cmd\ndocker container run --rm -it -v %cd%/src:/app/src alpine:latest /bin/sh\n\n// Powershell\ndocker container run --rm -it -v ${pwd}/src:/app/src alpine:latest /bin/sh\n"})})})]}),"\n",(0,s.jsxs)(n.h3,{id:"using---mount",children:["Using ",(0,s.jsx)(n.code,{children:"--mount"})]}),"\n",(0,s.jsx)(n.h4,{id:"macos--linux-1",children:"macOS & Linux"}),"\n",(0,s.jsxs)(o,{groupId:"container-runtime",children:[(0,s.jsx)(i,{value:"nerdctl",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"nerdctl container run --rm -it --mount=type=bind,source=$(pwd)/src,target=/app/src alpine:latest /bin/sh\n"})})}),(0,s.jsx)(i,{value:"docker",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"docker container run --rm -it --mount=type=bind,source=$(pwd)/src,target=/app/src alpine:latest /bin/sh\n"})})})]}),"\n",(0,s.jsx)(n.h4,{id:"windows-1",children:"Windows"}),"\n",(0,s.jsxs)(o,{groupId:"container-runtime",children:[(0,s.jsx)(i,{value:"nerdctl",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"// Cmd\nnerdctl container run --rm -it --mount=type=bind,source=%cd%/src,target=/app/src alpine:latest /bin/sh\n\n// Powershell\nnerdctl container run --rm -it --mount=type=bind,source=${pwd}/src,target=/app/src alpine:latest /bin/sh\n"})})}),(0,s.jsx)(i,{value:"docker",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"// Cmd\ndocker container run --rm -it --mount=type=bind,source=%cd%/src,target=/app/src alpine:latest /bin/sh\n\n// Powershell\ndocker container run --rm -it --mount=type=bind,source=${pwd}/src,target=/app/src alpine:latest /bin/sh\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"/app/src"})," is not available on the host machine then the command creates it. Anything you create inside the directory ",(0,s.jsx)(n.code,{children:"/app/src"})," on the host machine is available at ",(0,s.jsx)(n.code,{children:"/app/src"})," inside the container and vice versa. Try adding or modifying content inside ",(0,s.jsx)(n.code,{children:"/app/src"})," in the container and exit the container by typing ",(0,s.jsx)(n.code,{children:"exit"})," in the shell. On restarting the container, you will notice that the content of ",(0,s.jsx)(n.code,{children:"/app/src"}),"  is persisted and same would be the case for container engine, and host machine restarts.\n."]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:["Currently, Rancher Desktop allows creating bind mounts only on the following directories by default: ",(0,s.jsx)(n.code,{children:"/Users/$USER"})," on macOS, ",(0,s.jsx)(n.code,{children:"/home/$USER"})," on Linux, and ",(0,s.jsx)(n.code,{children:"/tmp/rancher-desktop"})," on both. For Windows, all files are automatically shared via WSL2."]}),(0,s.jsxs)(n.p,{children:["If you want to change the behavior of the mounts, you can use provisioning scripts as described in the ",(0,s.jsx)(n.a,{href:"https://github.com/rancher-sandbox/rancher-desktop/issues/1209#issuecomment-1370181132",children:"thread"}),"."]})]}),"\n",(0,s.jsx)(n.h2,{id:"volume",children:"Volume"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Volume"})," is an another mechanism to achieve persistance for container workloads. While Bind mounts link to the host's file system, volumes on the otherhand are managed by the container engine and provide data persistence and isolation from the host. For example, to create a named volume and start a container using the volume, you can use ",(0,s.jsx)(n.code,{children:"-v"})," or the slightly verbose ",(0,s.jsx)(n.code,{children:"--mount"})," as shown below."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Create a named volume"}),"\n"]}),"\n",(0,s.jsxs)(o,{groupId:"container-runtime",children:[(0,s.jsx)(i,{value:"nerdctl",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"nerdctl volume create my-persistent-data\n"})})}),(0,s.jsx)(i,{value:"docker",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"docker volume create my-persistent-data\n"})})})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Start a container using the named volume created in the previous step"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"using--v-1",children:["Using ",(0,s.jsx)(n.code,{children:"-v"})]}),"\n",(0,s.jsxs)(o,{groupId:"container-runtime",children:[(0,s.jsx)(i,{value:"nerdctl",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"nerdctl container run --rm -it -v my-persistent-data:/app/src alpine:latest /bin/sh\n"})})}),(0,s.jsx)(i,{value:"docker",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"docker container run --rm -it -v my-persistent-data:/app/src alpine:latest /bin/sh\n"})})})]}),"\n",(0,s.jsxs)(n.h3,{id:"using---mount-1",children:["Using ",(0,s.jsx)(n.code,{children:"--mount"})]}),"\n",(0,s.jsxs)(o,{groupId:"container-runtime",children:[(0,s.jsx)(i,{value:"nerdctl",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"nerdctl container run --rm -it --mount=type=volume,source=my-persistent-data,target=/app/src alpine:latest /bin/sh\n"})})}),(0,s.jsx)(i,{value:"docker",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"docker container run --rm -it --mount=type=volume,source=my-persistent-data,target=/app/src alpine:latest /bin/sh\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["Try adding or modifying content inside ",(0,s.jsx)(n.code,{children:"/app/src"})," in the container and exit the container by typing ",(0,s.jsx)(n.code,{children:"exit"})," in the shell. On restarting the container, you will notice that the content of ",(0,s.jsx)(n.code,{children:"/app/src"}),"  is persisted and same would be the case for container engine, and host machine restarts."]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}function u(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},11151:function(e,n,t){t.d(n,{Z:function(){return a},a:function(){return o}});var s=t(67294);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);